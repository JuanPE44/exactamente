---
import ContainerSection from '@/components/common/ContainerSection.astro';
import HeaderResource from '@/components/common/HeaderResource.astro';
import Layout from '@/layouts/Layout.astro';
import IconPaper from '@/assets/icons/IconPaper.astro';
import Breadcrumb from '@/components/common/Breadcrumb.astro';

import ListOfResources from '@/components/common/ListOfResources.astro';
import { MATERIAS_SISTEMAS } from '@/data/materias';
import { getByIdResumenes } from '@/services/resumenes';

export async function getStaticPaths() {
  return MATERIAS_SISTEMAS.map((materia) => ({
    params: { id: materia.url },
  }));
}

const { id } = Astro.params;
const subject = MATERIAS_SISTEMAS.filter((subject) => subject.url == `/${id}`)[0];
const { data, error } = await getByIdResumenes(subject.id);
---

<Layout>
  <ContainerSection id='resumenes'>
    <Breadcrumb url={`..${subject.url}`} title={subject.title} />
    <HeaderResource
      title='Resumenes'
      subject={subject.title}
      cantResource={data.length}
      urlImg='/images/materia-2.png'
      ><IconPaper size={30} />
    </HeaderResource>
    <ListOfResources resources={data} error={error} type='resumen' />
  </ContainerSection>
</Layout>
