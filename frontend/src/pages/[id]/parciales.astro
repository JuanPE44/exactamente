---
import ContainerSection from '@/components/common/ContainerSection.astro';
import HeaderResource from '@/components/common/HeaderResource.astro';
import Layout from '@/layouts/Layout.astro';
import Breadcrumb from '@/components/common/Breadcrumb.astro';

import ListOfResources from '@/components/common/ListOfResources.astro';
import IconDocument from '@/assets/icons/IconDocument.astro';
import { MATERIAS_SISTEMAS } from '@/data/materias';
import { getByIdParciales } from '@/services/parciales';

export async function getStaticPaths() {
  return MATERIAS_SISTEMAS.map((materia) => ({
    params: { id: materia.url },
  }));
}

const { id } = Astro.params;
const subject = MATERIAS_SISTEMAS.filter((subject) => subject.url == `/${id}`)[0];
const { data, error } = await getByIdParciales(subject.id);
---

<Layout>
  <ContainerSection id='parciales'>
    <Breadcrumb url={`..${subject.url}`} title={subject.title} />
    <HeaderResource
      title='Parciales'
      cantResource={data.length}
      subject={subject.title}
      urlImg='/images/materia-2.png'
      ><IconDocument size={30} />
    </HeaderResource>
    <ListOfResources resources={data} error={error} type='parcial' />
    <!--
      <div class='h-screen'></div>
     -->
  </ContainerSection>
</Layout>
